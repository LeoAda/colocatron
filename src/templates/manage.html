{% extends 'layout.html' %}
{% block title %}Manage{% endblock%}
{% block header%}<h2 class="subtitle">Manage</h2>{% endblock %}

{% block content %}
<ul id="tasks">
    Tasks : {% for task in tasks %}
    <li>{{task.emoji|emojify}} - {{ task.name }} - {{task.current_user.name}}</li>
    {% else %}
    <li>No tasks</li>
    {% endfor %}
    <form action="{{ url_for('request_add_task') }}" method="post">
        <label for="task_name">Name</label>
        <input type="text" name="task_name" id="task_name" required />
        <label for="emoji">Emoji(optional)</label>
        <input type="text" name="emoji" id="emoji" />
        <label for="user_id">User</label>
        <select name="user_id" id="user_id">
            {% for user in users%}
            <option value="{{ user.id }}">{{user.name}}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Add" />
    </form>
</ul>

<ul id="items">
    Items : {% for item in items %}
    <li>{{item.emoji|emojify}} - {{ item.name }} - {{item.current_user.name}}</li>
    {% else %}
    <li>No items</li>
    {% endfor %}
    <form action="{{ url_for('request_add_item') }}" method="post">
        <label for="item_name">Name</label>
        <input type="text" name="item_name" id="item_name" required />
        <label for="emoji">Emoji(optional)</label>
        <input type="text" name="emoji" id="emoji" />
        <label for="user_id">User</label>
        <select name="user_id" id="user_id">
            {% for user in users%}
            <option value="{{ user.id }}">{{user.name}}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Add" />
    </form>
</ul>

<ul id="transactions">
    Transactions : {% for transaction in transactions%}
    <li>
        {{transaction.sender}}({{"Approved" if transaction.sender_approved else "Not approved"}})
        â†’ {{transaction.receiver}}({{"Approved" if transaction.receiver_approved else "Not approved"}}) -
        {{transaction.amount}}{{CURRENCY}} -
        {{transaction.reason}}
    </li>
    {% else %}
    <li>No transactions</li>
    {% endfor %}
    <p>Ask : </p>
    <form action="{{ url_for('request_add_transaction') }}" method="post">
        <label for="sender_id">Sender</label>
        <select name="sender_id" id="sender_id">
            {% for user in users if user.id != current_user.id%}
            <option value="{{ user.id }}">{{user.name}}</option>
            {% endfor %}
        </select>
        <label for="receiver_id">receiver</label>
        <select name="receiver_id" id="receiver_id">
            <option value="{{ current_user.id }}">{{current_user.name}}</option>
        </select>
        <label for="amount">amount</label>
        <input type="text" name="amount" id="amount" required />
        <label for="reason">reason</label>
        <input type="text" name="reason" id="reason" required />
        <input type="submit" value="Ask" />
    </form>
    <p>Send : </p>
    <form action="{{ url_for('request_add_transaction') }}" method="post">
        <label for="sender_id">Sender</label>
        <select name="sender_id" id="sender_id">
            <option value="{{ current_user.id }}">{{current_user.name}}</option>
        </select>
        <label for="receiver_id">receiver</label>
        <select name="receiver_id" id="receiver_id">
            {% for user in users if user.id != current_user.id%}
            <option value="{{ user.id }}">{{user.name}}</option>
            {% endfor %}
        </select>
        <label for="amount">amount</label>
        <input type="text" name="amount" id="amount" required />
        <label for="reason">reason</label>
        <input type="text" name="reason" id="reason" required />
        <input type="submit" value="Send" />
    </form>
</ul>
{% endblock %}